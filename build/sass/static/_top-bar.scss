.top-bar {
    
    font-family: $header-font-family;
    text-transform: uppercase;

    .nav-menu {

        > .dropdown.menu {

            > .current-menu-item, > .current-menu-ancestor {

                > a {
                    color: $secondary-color;
                }

                &.is-dropdown-submenu-parent.is-right-arrow {

                    > a:after {

                        border-left-color: $secondary-color !important;

                    }

                }

                &.is-dropdown-submenu-parent.is-down-arrow {

                    > a:after {

                        border-top-color: $secondary-color !important;

                    }

                }

            }

            .is-dropdown-submenu-parent.is-right-arrow {

                // Top Level
                > a:after {
                    border-left-color: $topbar-link-color;
                }

                // Top Level:hover
                &:hover > a:after {

                    @if lightness( darken( $topbar-background, 10% ) ) < 50% {

                        border-left-color: $light-color;

                    }
                    @else {

                        border-left-color: $dark-color;

                    }

                }

            }
            .is-dropdown-submenu-parent.is-down-arrow {

                > a:after {
                    border-top-color: $topbar-link-color;
                }

                &:hover > a:after {

                    @if lightness( darken( $topbar-background, 10% ) ) < 50% {

                        border-top-color: $light-color;

                    }
                    @else {

                        border-top-color: $dark-color;

                    }

                }

            }

        }

        > .menu {
            
            // All levels
            li {
                
                &.is-dropdown-submenu-parent {
                    
                    > a:after {
                        border-width: 4px;
                        right: 10px;
                    }
                    
                }
                
            }

            // Top Level
            > li:hover {
                background-color: lighten( $topbar-background, 5% ) !important;

                > a {
                    @include light-or-dark-text( lighten( $topbar-background, 5% ) );
                }

            }

            // Everything below
            > li {

                li {
                    
                    text-transform: none;
                    
                    a {
                        @include light-or-dark-text( $dropdownmenu-background );
                    }
                    
                }

                li:hover {
                    background-color: $light-gray !important;

                    > a {
                        @include light-or-dark-text( $light-gray );
                    }

                }

                .is-dropdown-submenu-parent.is-right-arrow {

                    > a:after {

                        @if lightness( $dropdownmenu-background ) < 50% {

                            border-left-color: $light-color !important;

                        }
                        @else {

                            border-left-color: $dark-color !important;

                        }

                    }

                    // Sub-level with submenu:hover
                    &:hover > a:after {

                        @if lightness( $light-gray ) < 50% {

                            border-left-color: $light-color !important;

                        }
                        @else {

                            border-left-color: $dark-color !important;

                        }

                    }

                }
                .is-dropdown-submenu-parent.is-down-arrow {

                    > a:after {

                        @if lightness( $dropdownmenu-background ) < 50% {

                            border-top-color: $light-color !important;

                        }
                        @else {

                            border-top-color: $dark-color !important;

                        }

                    }

                    &:hover > a:after {

                        @if lightness( $light-gray ) < 50% {

                            border-top-color: $light-color !important;

                        }
                        @else {

                            border-top-color: $dark-color !important;

                        }

                    }

                }

            }

            > li li.current-menu-item, > li li.current-menu-ancestor {

                background-color: darken( $light-gray, 10% );

                > a {
                    @include light-or-dark-text( darken( $light-gray, 10% ) );
                }
                
                &.is-dropdown-submenu-parent.is-right-arrow {

                    > a:after {

                        @if lightness( darken( $light-gray, 10% ) ) < 50% {

                            border-left-color: $light-color !important;

                        }
                        @else {

                            border-left-color: $dark-color !important;

                        }

                    }

                }
                
                &.is-dropdown-submenu-parent.is-down-arrow {

                    > a:after {

                        @if lightness( darken( $light-gray, 10% ) ) < 50% {

                            border-top-color: $light-color !important;

                        }
                        @else {

                            border-top-color: $dark-color !important;

                        }

                    }

                }

            }

        }

    }

}

